% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/draw_pca.R
\name{draw_pca}
\alias{draw_pca}
\title{Draw PCA Plot with Density and Box Plots}
\usage{
draw_pca(
  df,
  var_names,
  Group,
  group_labels = NULL,
  colors = NULL,
  x_limits = NULL,
  y_limits = NULL,
  show_stats = TRUE,
  point_size = 3,
  top_n_vars = 5
)
}
\arguments{
\item{df}{A data frame containing the variables for PCA analysis}

\item{var_names}{A character vector specifying the names of variables to be used in PCA}

\item{Group}{A character vector specifying the levels of groups}

\item{group_labels}{Optional character vector for custom group labels}

\item{colors}{Optional vector of colors for groups}

\item{x_limits}{Optional numeric vector of length 2 specifying x-axis limits}

\item{y_limits}{Optional numeric vector of length 2 specifying y-axis limits}

\item{show_stats}{Logical, whether to show PERMANOVA results (default: TRUE)}

\item{point_size}{Numeric, size of points in the plot (default: 3)}

\item{top_n_vars}{Numeric, number of top contributing variables to show (default: 5, 0 for no variables)}
}
\value{
A ggplot object containing the combined PCA plot
}
\description{
This function creates a comprehensive PCA plot with density distributions and box plots
for visualizing group differences in multivariate data.
}
\examples{
\dontrun{
# Create example data
set.seed(123)
df_example <- data.frame(
  SampleID = paste0("Sample_", sprintf("\%03d", 1:75)),
  Group = rep(c("G1", "G2", "G3", "G4", "G5"), each = 15),
  DOC = c(
    rnorm(15, 100, 15), rnorm(15, 90, 15), rnorm(15, 110, 15),
    rnorm(15, 95, 15), rnorm(15, 105, 15)
  ),
  MBC = c(
    rnorm(15, 200, 30), rnorm(15, 180, 30), rnorm(15, 220, 30),
    rnorm(15, 190, 30), rnorm(15, 210, 30)
  ),
  TDN = c(
    rnorm(15, 25, 4), rnorm(15, 23, 4), rnorm(15, 27, 4),
    rnorm(15, 24, 4), rnorm(15, 26, 4)
  ),
  AP = c(
    rnorm(15, 50, 8), rnorm(15, 45, 8), rnorm(15, 55, 8),
    rnorm(15, 48, 8), rnorm(15, 52, 8)
  ),
  NAG = c(
    rnorm(15, 30, 6), rnorm(15, 28, 6), rnorm(15, 32, 6),
    rnorm(15, 29, 6), rnorm(15, 31, 6)
  ),
  BG = c(
    rnorm(15, 80, 12), rnorm(15, 75, 12), rnorm(15, 85, 12),
    rnorm(15, 78, 12), rnorm(15, 82, 12)
  ),
  LAP = c(
    rnorm(15, 40, 6), rnorm(15, 37, 6), rnorm(15, 43, 6),
    rnorm(15, 39, 6), rnorm(15, 41, 6)
  ),
  TC = c(
    rnorm(15, 150, 20), rnorm(15, 140, 20), rnorm(15, 160, 20),
    rnorm(15, 145, 20), rnorm(15, 155, 20)
  ),
  TN = c(
    rnorm(15, 15, 3), rnorm(15, 14, 3), rnorm(15, 16, 3),
    rnorm(15, 14.5, 3), rnorm(15, 15.5, 3)
  ),
  TP = c(
    rnorm(15, 3, 0.6), rnorm(15, 2.8, 0.6), rnorm(15, 3.2, 0.6),
    rnorm(15, 2.9, 0.6), rnorm(15, 3.1, 0.6)
  )
)

# Use function
pca_plot <- draw_pca(
  df = df_example,
  var_names = c("DOC", "MBC", "TDN", "AP", "NAG", "BG", "LAP", "TC", "TN", "TP"),
  Group = c("G1", "G2", "G3", "G4", "G5"),
  group_labels = c("Control", "Treatment 1", "Treatment 2", "Treatment 3", "Treatment 4"),
  top_n_vars = 3,
  point_size = 1,
  show_stats = TRUE,
  y_limits = c(-2,2),
  x_limits = c(-2,2)
)

# Save plot
ggsave("PCA_plot.png", pca_plot, width = 6, height = 6, limitsize = FALSE)
}
}
